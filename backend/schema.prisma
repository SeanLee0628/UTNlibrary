datasource db {
  provider = "postgresql"
  url      = "postgresql://neondb_owner:npg_L7yPr3IniVza@ep-bitter-math-aekw5nr9-pooler.c-2.us-east-2.aws.neon.tech/neondb?channel_binding=require&sslmode=require"
}

generator client {
  provider             = "prisma-client-py"
  interface            = "asyncio"
  recursive_type_depth = 5
}

model Book {
  id        Int      @id @default(autoincrement())
  title     String
  author    String
  qrData    String   @unique
  status    String   @default("AVAILABLE") // "AVAILABLE", "LOANED"
  loans     Loan[]
}

model Member {
  id        Int      @id @default(autoincrement())
  name      String
  loans     Loan[]
}

model Loan {
  id        Int      @id @default(autoincrement())
  loanDate  DateTime @default(now())
  dueDate   DateTime
  returnDate DateTime?
  memberId  Int
  member    Member   @relation(fields: [memberId], references: [id])
  bookId    Int
  book      Book     @relation(fields: [bookId], references: [id])
}
